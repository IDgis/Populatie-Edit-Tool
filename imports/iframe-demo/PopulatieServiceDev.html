<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Populatie Service</title>
        <script type="text/javascript">
            /*const json = {
                "refps": "",
                "datum tijd (UTC)": "",
                "gebruikernaam": "",
                "gebruikderid": "",
                "status": "",
                "panden": [
                    {
                        "pandid": "0402010001618440",
                        "geometrie": {
                            "coordsys": "WGS84",
                            "type": "Polygon",
                            "coordinates": [
                            [
                                [ 100.0, 0.0 ],
                                [ 101.0, 0.0 ],
                                [ 101.0, 1.0 ],
                                [ 100.0, 1.0 ],
                                [ 100.0, 0.0 ]
                            ],
                            [
                                [ 100.8, 0.8 ],
                                [ 100.8, 0.2 ],
                                [ 100.2, 0.2 ],
                                [ 100.2, 0.8 ],
                                [ 100.8, 0.8 ]
                            ]
                            ]
                        },
                        "aantal verblijfsobjecten": 2,
                        "gemiddelde hoogte (BAG3D)": 0,
                        "geregistreerd totaal bruto vloeroppervlak": 2610,
                        "geschat aantal etages": 1,
                        "geschat totaal bruto vloeroppervlak": 2460,
                        "geschatte hoogte etage": 2,
                        "grondoppervlak": 2460,
                        "huishoudensgrootte": 2.2,
                        "status": "Pand in gebruik",
                        "verblijfsobjecten": [
                            {
                            "verblijfsobjectid": "0402010001618442",
                            "adres": {
                                "identificatie": "0402010001618444",
                                "openbareruimte": "Egelantierstraat",
                                "huisnummer": 17,
                                "huisletter": "",
                                "huisnummertoevoeging": "",
                                "postcode": "1214EH",
                                "woonplaatsnaam": "Hilversum"
                            },
                            "oppervlakte": 2359,
                            "verblijfsfuncties": [
                                {
                                "oppervlakte": 99,
                                "functie": "Woonfunctie",
                                "aantal-personen": 2.4,
                                "aanvullend": "Woonfunctie gezin",
                                "aantal-woonunits": 2
                                },
                                {
                                "oppervlakte": 76,
                                "functie": "Woonfunctie",
                                "aantal-personen": 2.4,
                                "aanvullend": "Woonfunctie gezin",
                                "aantal-woonunits": 1
                                },
                                {
                                "oppervlakte": 99,
                                "functie": "Gezondheidszorgfunctie",
                                "aantal-personen": 60,
                                "aanvullend": "Gezondheidszorgfunctie (kliniek, artsenpraktijk)"
                                },
                                {
                                "oppervlakte": 99,
                                "functie": "Kinderdagverblijf",
                                "aantal-personen": 15,
                                "aanvullend": "Kinderdagverblijf"
                                }
                            ]
                            },
                            {
                            "verblijfsobjectid": "0402010001618446",
                            "adres": {
                                "identificatie": "0402010001618448",
                                "openbareruimte": "Egelantierstraat",
                                "huisnummer": 19,
                                "huisletter": "",
                                "huisnummertoevoeging": "",
                                "postcode": "1214EH",
                                "woonplaatsnaam": "Hilversum"
                            },
                            "oppervlakte": 175,
                            "verblijfsfuncties": [
                                {
                                "oppervlakte": 99,
                                "functie": "Kinderdagverblijf",
                                "aantal-personen": 15,
                                "aanvullend": "Kinderdagverblijf"
                                },
                                {
                                "oppervlakte": 76,
                                "functie": "Woonfunctie",
                                "aantal-personen": 2.4,
                                "aanvullend": "Woonfunctie gezin"
                                }
                            ]
                            }
                        ]
                    }
                ]
            };*/

            const json = {
                "datum tijd (UTC)": "2018-05-28 09:50:54",
                "gebruikerid": "39f3a811-87fa-4671-a895-dc8f05687478",
                "gebruikernaam": "kevin.van.den.bosch@idgis.nl",
                "panden": [{
                    "Identificatie": "0402100001489040",
                    "aantal verblijfsobjecten": 5,
                    "gemiddelde hoogte (BAG3D)": 7,
                    "geregistreerd totaal bruto vloeroppervlak": 1546,
                    "geschat aantal etages": 2,
                    "geschat totaal bruto vloeroppervlak": 2533,
                    "geschatte hoogte etage": 3,
                    "grondoppervlak": 1267,
                    "huishoudensgrootte": 1.9,
                    "status": "Pand in gebruik (niet ingemeten)",
                    "verblijfsobjecten": [
                        {
                            "Adres": {
                                "Identificatie": "0402200001627419",
                                "huisletter": "",
                                "huisnummer": 1,
                                "huisnummer-toevoeging": "",
                                "postcode": "1212ES",
                                "straat": "Van Linschotenlaan",
                                "woonplaats": "Hilversum"
                            },
                            "Identificatie": "0402010001627394",
                            "aantal-verblijfsfuncties": 2,
                            "Oppervlakte": 897,
                            "status": "Verblijfsobject in gebruik (niet ingemeten)",
                            "verblijfsfuncties": [
                                {
                                    "Functie": "gezondheidsfunctie",
                                    "Oppervlakte": 598,
                                    "aantal-personen": 19.93,
                                    "aanvullend": ""
                                },
                                {
                                    "Functie": "kantoorfunctie",
                                    "Oppervlakte": 299,
                                    "aantal-personen": 9.97,
                                    "aanvullend": ""
                                }
                            ]
                        },
                    ],
                    "fouten": [
                        "Totaal bruto vloer oppervlak te groot voor gebouw footprint (max 70 verdiepingen)"
                    ],
                    "waarschuwingen": [
                        "Totaal bruto vloer oppervlak erg klein in relatie tot volume gebouw"
                    ]
                }],
                "refps": 129,
                "status": "OK"
            };

            const origin = 'http://localhost:3000';

            window.addEventListener('message', editToolListener, false);

            function editToolListener(event) {
                if(event.origin === origin) {
                    console.log('POPULATIE SERVICE:');
                    console.log(event);
                }
            }

            function test() {
                const iFrame = document.getElementsByTagName('iframe')[0];
                iFrame.contentWindow.postMessage(JSON.stringify(json), origin);
            }
        </script>
    </head>
    <body>
        <iframe name="iframe" id="iframe_id" src="http://localhost:3000" height="700" width="1000" onload="test();" ></iframe>
    </body>
</html>